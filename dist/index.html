<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>typescript</title>
    <meta name="viewport" content="width=480, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <link href="./style.css" rel="stylesheet">
</head>
<body>
<div class="bg">
    <div class="box"></div>
    <button id="button">it is a button</button>

    <ul id="tabMenu">
        <li>
            <a href="javascript:;">tabMenu1</a>
        </li>
        <li>
            <a href="javascript:;">tabMenu2</a>
        </li>
        <li>
            <a href="javascript:;">tabMenu3</a>
        </li>
    </ul>

    <button id="btn">프로미스 만들기</button>
    <div id="log"></div>

    <div class="inputs">
        <input type="text" maxlength="10" id="formJoin01">
        <span>-</span>
        <input type="text" maxlength="10" id="formJoin02">
        <span>-</span>
        <input type="text" maxlength=10" id="formJoin03">
        <span>-</span>
        <input type="text" maxlength="10" id="formJoin04">
        <span>-</span>

    </div>
    <div class="inputs">
        <input type="tel" maxlength="4">
        <span>-</span>
        <input type="tel" maxlength="4">
        <span>-</span>
        <input type="tel" maxlength="4">
        <span>-</span>
        <input type="tel" maxlength="4">
        <span>-</span>
    </div>

    <div>
        <input type="text" id="email">
    </div>

    <button type="button" class="btn-king">킹받네</button>

    <div id="data"></div>
    <script type="module" src="./app.js"></script>
    <!--<script src="./array.js"></script>
    <script src="./map.js"></script>-->
    <script>
        console.log('aaa')
        window.onbeforeunload = function (e) {
            e.preventDefault()
            alert('ttttt')

        }




        window.addEventListener('pagehide', (event) => {
            // 표준에 따라 기본 동작 방지  event.preventDefault();
            event.preventDefault()
            alert('test')
        });

        class Rectangle {
            constructor(width, height) {
                this.width = width
                this.height = height
            }
            get area () {
                return this.calcArea()
            }

            calcArea() {
                return this.height * this.width
            }
        }


        const email = document.querySelector("#email")
        email.addEventListener('keyup', fn_submit)

    function fn_submit() {
        var text = document.getElementById('email').value;
        var regEmail =  /^[0-9a-zA-Z_.-]([-_.]?[0-9a-zA-Z_.-])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*.[a-zA-Z]{2,3}$/i
            /*
                /^[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*.[a-zA-Z]{2,3}$/i
                /^(?=.*[a-zA-Z])(?=.*[^a-zA-Z0-9]|.*[0-9]).{5,50}$/

                (?=.*\d)(?=.*[a-zA-z]).[@.\-].{5,50}
            */
        let regId = /^[a-zA-Z0-9@-_.]{5,50}$/
        // console.log(regId.test(text) && isNaN(Number(text)))
        const countBlank = text.replace(/\s+/g, '').length
        const allCount = text.length;
        console.log('공백제외',text.replace(/\s+/g, '').length)
        console.log('전체',text.length)
        let lastText = null
        if (allCount - countBlank === 2) {
            console.log('allCount - countBlank', allCount - countBlank)
            lastText = text.slice(0, countBlank + 1)
            document.getElementById('email').value = lastText
        }

    }

        function resolveAfter2Seconds() {
            return new Promise(resolve => {
                setTimeout(() => {
                    resolve('resolved');
                }, 2000);
            });
        }

        async function asyncCall() {
            console.log('calling');
            const result = await resolveAfter2Seconds();
            console.log(result);
            // expected output: "resolved"
        }

        asyncCall().then().finally(console.log('finished'));




        document.querySelector('.btn-king').addEventListener('click', ()=> {
            const id = document.querySelector('#id').value
            const pw = document.querySelector('#pw').value
            const birth = document.querySelector('#birth').value
            const month = document.querySelector('#month').value

            const birthfirst = birth.substring(0, 2)
            const monthfirst = month.substring(0, 2)
            let ischk1 = ''
            let ischk2 = ''
            let ischk3 = ''

            console.log(birthfirst, '<<<<<<<<<<<<<<<<<<<<<birstfirst')
            console.log(monthfirst, '<<<<<<<<<<<<<<<<<<<<<monthfirst')
            if (id === pw && pw.length > 0) {
                ischk1 = 'id'
            }
            if (pw.indexOf(birthfirst) >-1 && birth.length > 0) {
                ischk2 = 'birth'
            }
            if (pw.indexOf(monthfirst) >-1 && month.length > 0) {
                ischk3 = 'month'
            }

            console.log(pw.indexOf(birthfirst), '<<<<<<<<<<<<<<<<<<<<<  pw.indexOf(birthfirst)')
            console.log(pw.indexOf(monthfirst), '<<<<<<<<<<<<<<<<<<<<<  pw.indexOf(monthfirst)')


            const strSum = ischk1+ischk2+ischk3
            console.log(strSum +'========  '+strSum.length)

        })
    </script>
    <!--<script src="./functions.js"></script>-->
    <script src="./test.js"></script>
</div>
</body>
</html>